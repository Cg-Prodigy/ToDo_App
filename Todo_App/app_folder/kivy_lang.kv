#:kivy 2.3.0

#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import Window kivy.core.window.Window

#:include app_folder/components.kv
<EntryPoint>:  
    SignUpScreen:
        name:"signup"
    HomeScreen:
        name:"homescreen"
    CreateTask:
        name:"create_task"
<SignUpScreen>:
    user_name:user_name
    MDRelativeLayout:
        MDCard:
            size_hint:None,None
            size:Window.width-dp(20),Window.height*.5
            orientation:"vertical"
            md_bg_color:get_color_from_hex("#002D62")
            pos_hint:{"center_x":.5,"center_y":.5}
            MDRelativeLayout:
                size_hint_y:.5
                Image:
                    source:"Images/logo.png"
                    size:100,100
            MDBoxLayout:
                size_hint_y:.5
                padding:dp(10)
                orientation: 'vertical'
                spacing:5
                MDRelativeLayout:
                    MDLabel:
                        text:"TO START CREATE A USERNAME FOR YOURSELF."
                        adaptive_height:True
                        halign:"center"
                        theme_text_color:"Custom"
                        text_color:get_color_from_hex("#FFD166")
                        pos_hint:{"top":1}
                MDTextField:
                    mode:"rectangle"
                    hint_text:"User Name"
                    line_color_normal:get_color_from_hex("#F0F8FF")
                    id:user_name
                MDRelativeLayout:
                    MDFillRoundFlatButton:
                        text:"Continue"
                        pos_hint:{"right":1}
                        theme_text_color:"Custom"
                        text_color:get_color_from_hex("#F0F8FF")
                        md_bg_color:get_color_from_hex("#002244")
                        on_release:
                            root.save_user_name()
<HomeUI>:
    spacing:dp(10)
    Card:
        md_bg_color:get_color_from_hex("#002D62")
        size_hint_y:.3
        orientation: 'horizontal'
        MDBoxLayout:
            size_hint_x:.7
            orientation: 'vertical'
            spacing:dp(10)
            Lb:
                id:user_name
            Card:
                md_bg_color:get_color_from_hex("#002050")
                orientation: 'horizontal'
                MDRelativeLayout:
                    size_hint_x:.5
                    Lb:
                        text:"Groups"
                        halign:"center"
                        pos_hint:{"center_y":.5}
                    Lb:
                        id:group_no
                        halign:"center"
                        pos_hint:{"center_y":.3}

                MDRelativeLayout:
                    size_hint_x:.5
                    Lb:
                        text:"Tasks"
                        halign:"center"
                        pos_hint:{"center_y":.5}
                    Lb:
                        id:task_no
                        halign:"center"
                        pos_hint:{"center_y":.3} 

        MDBoxLayout:
            size_hint_x:.3
            Image:
                source:"Images/stats.png"
    MDGridLayout:
        size_hint_y:.7
        cols:1
        rows:2
        margin:dp(1),dp(5)
        MDBoxLayout:
            size_hint_y:.4
            MDCard:
                md_bg_color:get_color_from_hex("#002050")
                size_hint:None,None
                width:dp(100)
                height:dp(120)
                MDRelativeLayout:
                    MDIconButton:
                        icon:"plus"
                        icon_size:sp(50)
                        theme_icon_color:"Custom"
                        icon_color:get_color_from_hex("#F0F8FF")
                        pos_hint:{'center_x':.5,"center_y":.5}
                        on_release:
                            root.parent.parent.manager.current="create_task"
                            root.parent.parent.manager.transition.direction="left"
        MDScrollView:


<CreateTask>:
    group_btns:group_btns
    task_btns:task_btns
    MDBoxLayout:
        orientation: 'vertical'
        MDTopAppBar:
            left_action_items:[["arrow-left",lambda x:root.change_screen()]]
            elevation:0
            md_bg_color:get_color_from_hex("#FFFFFF")
            specific_text_color:get_color_from_hex("#002050")
            id:top_bar
        MDScrollView:
            size_hint_y:None
            height:Window.height-top_bar.height
            MDGridLayout:
                size_hint_y:None
                height:Window.height+dp(5)
                cols:1
                rows:3
                spacing:dp(7)
                padding:dp(5),dp(2)
                Card:
                    size_hint_y:None
                    height:dp(120)
                    MDRelativeLayout:
                        Lb:
                            text:"Group Name"
                            pos_hint:{"top":.9}
                    MDTextField:
                        id:group_input
                        mode:"round"
                        fill_color_normal:get_color_from_hex("#002050")
                        fill_color_focus:get_color_from_hex("#F0F8FF")
                        helper_text:"No special Characters"
                        helper_text_color_focus:get_color_from_hex("#F0F8FF")
                        on_focus:root.check_group(self)
                    MDFillRoundFlatButton:
                        icon:"folder-outline"
                        text:"Create Group"
                        pos_hint:{"right":1}
                        on_release:root.create_group_task(group_input)
                Card:
                    size_hint_y:None
                    height:dp(130)
                    MDBoxLayout:
                        orientation: 'vertical'
                        spacing:dp(3)
                        MDRelativeLayout:
                            Lb:
                                text:"Task Title"
                                pos_hint:{"top":.9}
                        MDTextField:
                            id:task_title
                            mode:"round"
                            fill_color_normal:get_color_from_hex("#002050")
                            fill_color_focus:get_color_from_hex("#F0F8FF")
                            helper_text:"No special Characters. Keep it brief"
                            helper_text_color_focus:get_color_from_hex("#F0F8FF")
                            max_text_length:18
                            max_length_text_color:get_color_from_hex("#F0F850")
                           
                        MDRelativeLayout:
                            size_hint_y:None
                            height:dp(50)
                            MDFillRoundFlatButton:
                                icon:"folder-outline"
                                text:"Add title"
                                pos_hint:{"right":1}
                                padding:dp(3),dp(10)
                                on_release:root.add_task(task_title)
                MDGridLayout:
                    row:1
                    cols:2
                    id:task_grid
                    MDCard:
                        padding:dp(3),dp(5)
                        md_bg_color:get_color_from_hex("#F0F8FF")
                        elevation:2
                        id:group_btns
                        size_hint_x:.4
                    MDScrollView:
                        size_hint_y:None
                        height:task_grid.height
                        MDGridLayout:
                            cols:1
                            id:task_btns
                            padding:dp(3),dp(5)
                            size_hint_y:None
                            spacing:dp(4)
                            height:task_grid.height+dp(3)

